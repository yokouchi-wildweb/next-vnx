# ã‚¢ã‚»ãƒƒãƒˆç®¡ç†

æ±ç”¨ã‚¢ã‚»ãƒƒãƒˆï¼ˆSEã€BGMã€ç”»åƒã€å‹•ç”»ï¼‰ã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã€‚

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
public/game/
â”œâ”€â”€ assets/              â† æ±ç”¨ã‚¢ã‚»ãƒƒãƒˆï¼ˆãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆç®¡ç†ï¼‰
â”‚   â”œâ”€â”€ bgm/             â† BGM
â”‚   â”œâ”€â”€ se/              â† åŠ¹æœéŸ³
â”‚   â”œâ”€â”€ img/             â† ç”»åƒ
â”‚   â”œâ”€â”€ vid/             â† å‹•ç”»
â”‚   â””â”€â”€ manifest.json    â† è‡ªå‹•ç”Ÿæˆ
â”‚
â””â”€â”€ scenarios/           â† ã‚·ãƒŠãƒªã‚ªå›ºæœ‰ï¼ˆã‚·ãƒŠãƒªã‚ªã¨ä¸€ä½“ç®¡ç†ï¼‰
    â””â”€â”€ _sample/
        â”œâ”€â”€ characters/
        â””â”€â”€ backgrounds/
```

## ã‚³ãƒãƒ³ãƒ‰

### ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆç”Ÿæˆ

```bash
pnpm asset:scan
```

- å…¨ã‚¢ã‚»ãƒƒãƒˆã‚’ã‚¹ã‚­ãƒ£ãƒ³ã—ã¦ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ç”Ÿæˆ/æ›´æ–°
- ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•ã‚’æ¤œå‡ºã—ã¦IDã‚’ç¶­æŒï¼ˆpathã®ã¿æ›´æ–°ï¼‰
- æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ã¯IDè‡ªå‹•ç”Ÿæˆ
- å‰Šé™¤ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã¯è­¦å‘Šè¡¨ç¤º

### ã‚¨ã‚¤ãƒªã‚¢ã‚¹è¿½åŠ 

```bash
# å¯¾è©±å¼
pnpm asset:alias

# ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼
pnpm asset:alias <ã‚¢ã‚»ãƒƒãƒˆID> <ã‚¨ã‚¤ãƒªã‚¢ã‚¹>
pnpm asset:alias "se/çˆ†ç™º2" "se/explosion-02"
```

## ã‚³ãƒ¼ãƒ‰å†…ã§ã®ä½¿ç”¨

```ts
import { asset, se, bgm, img, video } from '@/engine/utils/assetResolver'

// æ±ç”¨ï¼ˆãƒ•ãƒ«IDæŒ‡å®šï¼‰
await asset('se/çˆ†ç™º2')

// ã‚«ãƒ†ã‚´ãƒªå°‚ç”¨ï¼ˆãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹çœç•¥å¯ï¼‰
await se('çˆ†ç™º2')              // â†’ /game/assets/se/çˆ†ç™º2.mp3
await bgm('ã‹ãŸã¾ã‚‹è„³ã¿ã')     // â†’ /game/assets/bgm/ã‹ãŸã¾ã‚‹è„³ã¿ã.mp3
await img('icon-play')         // â†’ /game/assets/img/icon-play.png
await video('intro')           // â†’ /game/assets/vid/intro.mp4

// ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã§ã‚‚ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
await se('explosion-02')       // â†’ /game/assets/se/çˆ†ç™º2.mp3

// åŒæœŸç‰ˆï¼ˆäº‹å‰ã« loadManifest() å¿…é ˆï¼‰
seSync('çˆ†ç™º2')
```

## ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆæ§‹é€ 

```json
{
  "version": 3,
  "generatedAt": "2025-12-26T...",
  "assets": {
    "se/çˆ†ç™º2": {
      "path": "se/çˆ†ç™º2.mp3",
      "ext": "mp3",
      "type": "audio",
      "aliases": ["se/explosion-02"]
    }
  },
  "aliasMap": {
    "se/explosion-02": "se/çˆ†ç™º2"
  }
}
```

## IDç”Ÿæˆãƒ«ãƒ¼ãƒ«

- å½¢å¼: `ã‚«ãƒ†ã‚´ãƒª/ãƒ•ã‚¡ã‚¤ãƒ«å`ï¼ˆæ‹¡å¼µå­ãªã—ï¼‰
- ä¾‹: `se/çˆ†ç™º2.mp3` â†’ ID: `se/çˆ†ç™º2`
- åŒä¸€ã‚«ãƒ†ã‚´ãƒªå†…ã§ãƒ•ã‚¡ã‚¤ãƒ«åã®é‡è¤‡ã¯ä¸å¯

## ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•æ™‚ã®æŒ™å‹•

1. ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç§»å‹•ï¼ˆä¾‹: `se/çˆ†ç™º2.mp3` â†’ `se/effects/çˆ†ç™º2.mp3`ï¼‰
2. `pnpm asset:manifest` ã‚’å®Ÿè¡Œ
3. IDã¯ç¶­æŒã€pathã®ã¿æ›´æ–°

```
ğŸ”„ ç§»å‹•æ¤œå‡º: se/çˆ†ç™º2.mp3 â†’ se/effects/çˆ†ç™º2.mp3
```

## ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã®ç”¨é€”

- æ—¥æœ¬èªIDã«è‹±èªã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’è¿½åŠ 
- çŸ­ç¸®åã§ã®ã‚¢ã‚¯ã‚»ã‚¹
- å¾Œæ–¹äº’æ›æ€§ã®ç¶­æŒï¼ˆIDå¤‰æ›´æ™‚ã«æ—§IDã‚’ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¨ã—ã¦æ®‹ã™ï¼‰

## æ³¨æ„äº‹é …

- `manifest.json` ã¯è‡ªå‹•ç”Ÿæˆãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆæ‰‹å‹•ç·¨é›†å¯ã ãŒéæ¨å¥¨ï¼‰
- ã‚·ãƒŠãƒªã‚ªå›ºæœ‰ã‚¢ã‚»ãƒƒãƒˆï¼ˆcharacters, backgroundsï¼‰ã¯ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆç®¡ç†å¯¾è±¡å¤–
- ã‚¢ã‚»ãƒƒãƒˆè¿½åŠ å¾Œã¯ `pnpm asset:scan` ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨
