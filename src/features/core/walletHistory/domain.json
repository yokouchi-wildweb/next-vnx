{
  "domainConfigVersion": "1.2",
  "singular": "wallet_history",
  "plural": "wallet_histories",
  "label": "ウォレット履歴",
  "dbEngine": "Neon",
  "idType": "uuid",
  "relations": [
    {
      "domain": "user",
      "label": "ユーザー",
      "fieldName": "user_id",
      "fieldType": "uuid",
      "relationType": "belongsTo",
      "required": true,
      "onDeleteCascade": false
    }
  ],
  "useCreatedAt": true,
  "useUpdatedAt": false,
  "fields": [
    {
      "name": "type",
      "label": "ウォレット種別",
      "fieldType": "enum",
      "formInput": "select",
      "required": true,
      "options": [
        { "value": "regular_point", "label": "通常ポイント" },
        { "value": "temporary_point", "label": "期間限定ポイント" },
        { "value": "regular_coin", "label": "通常コイン" }
      ]
    },
    {
      "name": "change_method",
      "label": "変更方法",
      "fieldType": "enum",
      "formInput": "radio",
      "required": true,
      "options": [
        { "value": "INCREMENT", "label": "増加" },
        { "value": "DECREMENT", "label": "減少" },
        { "value": "SET", "label": "残高セット" }
      ]
    },
    {
      "name": "points_delta",
      "label": "増減量",
      "fieldType": "integer",
      "formInput": "numberInput",
      "required": true,
      "readonly": true
    },
    {
      "name": "balance_before",
      "label": "変更前残高",
      "fieldType": "integer",
      "formInput": "numberInput",
      "required": true,
      "readonly": true
    },
    {
      "name": "balance_after",
      "label": "変更後残高",
      "fieldType": "integer",
      "formInput": "numberInput",
      "required": true,
      "readonly": true
    },
    {
      "name": "source_type",
      "label": "操作種別",
      "fieldType": "enum",
      "formInput": "radio",
      "required": true,
      "options": [
        { "value": "user_action", "label": "ユーザー操作" },
        { "value": "admin_action", "label": "管理者操作" },
        { "value": "system", "label": "システム" }
      ]
    },
    {
      "name": "request_batch_id",
      "label": "リクエストバッチID",
      "fieldType": "uuid",
      "formInput": "textInput",
      "required": false
    },
    {
      "name": "reason",
      "label": "変更理由",
      "fieldType": "string",
      "formInput": "textInput",
      "required": false
    },
    {
      "name": "meta",
      "label": "メタ情報",
      "fieldType": "json",
      "formInput": "none",
      "required": false
    }
  ],
  "searchFields": [
    "user_id",
    "type",
    "request_batch_id"
  ],
  "defaultOrderBy": [
    [
      "createdAt",
      "DESC"
    ]
  ],
  "tableFields": [
    "user_id",
    "type",
    "change_method",
    "points_delta",
    "balance_before",
    "balance_after",
    "source_type",
    "request_batch_id",
    "createdAt"
  ],
  "useDetailModal": false,
  "addToAdminDataMenu": false,
  "generateFiles": {
    "entities": true,
    "components": false,
    "hooks": true,
    "clientServices": true,
    "serverServices": true,
    "adminRoutes": false,
    "registry": true,
    "fieldConstants": true
  }
}
