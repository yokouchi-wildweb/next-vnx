{
  "domainConfigVersion": "1.2",
  "singular": "purchase_request",
  "plural": "purchase_requests",
  "label": "購入リクエスト",
  "dbEngine": "Neon",
  "idType": "uuid",
  "relations": [
    {
      "domain": "user",
      "label": "ユーザー",
      "fieldName": "user_id",
      "fieldType": "uuid",
      "relationType": "belongsTo",
      "required": true,
      "onDelete": "RESTRICT"
    },
    {
      "domain": "walletHistory",
      "label": "ウォレット履歴",
      "fieldName": "wallet_history_id",
      "fieldType": "uuid",
      "relationType": "belongsTo",
      "required": false,
      "onDelete": "RESTRICT"
    }
  ],
  "useCreatedAt": true,
  "useUpdatedAt": true,
  "fields": [
    {
      "name": "idempotency_key",
      "label": "冪等キー",
      "fieldType": "uuid",
      "formInput": "none",
      "required": true,
      "unique": true
    },
    {
      "name": "wallet_type",
      "label": "ウォレット種別",
      "fieldType": "enum",
      "formInput": "select",
      "required": true,
      "options": [
        { "value": "regular_point", "label": "通常ポイント" },
        { "value": "temporary_point", "label": "期間限定ポイント" },
        { "value": "regular_coin", "label": "通常コイン" }
      ]
    },
    {
      "name": "amount",
      "label": "購入数量",
      "fieldType": "integer",
      "formInput": "numberInput",
      "required": true
    },
    {
      "name": "payment_amount",
      "label": "支払い金額",
      "fieldType": "integer",
      "formInput": "numberInput",
      "required": true
    },
    {
      "name": "payment_method",
      "label": "支払い方法",
      "fieldType": "string",
      "formInput": "select",
      "required": true,
      "options": [
        { "value": "credit_card", "label": "クレジットカード" },
        { "value": "amazon_pay", "label": "Amazon Pay" },
        { "value": "convenience_store", "label": "コンビニ決済" },
        { "value": "bank_transfer", "label": "銀行振込" }
      ]
    },
    {
      "name": "status",
      "label": "ステータス",
      "fieldType": "enum",
      "formInput": "select",
      "required": true,
      "options": [
        { "value": "pending", "label": "処理待ち" },
        { "value": "processing", "label": "処理中" },
        { "value": "completed", "label": "完了" },
        { "value": "failed", "label": "失敗" },
        { "value": "expired", "label": "期限切れ" }
      ],
      "defaultValue": "pending"
    },
    {
      "name": "payment_provider",
      "label": "決済プロバイダ",
      "fieldType": "string",
      "formInput": "textInput",
      "required": true,
      "defaultValue": "dummy"
    },
    {
      "name": "payment_session_id",
      "label": "決済セッションID",
      "fieldType": "string",
      "formInput": "none",
      "required": false
    },
    {
      "name": "redirect_url",
      "label": "リダイレクトURL",
      "fieldType": "string",
      "formInput": "none",
      "required": false
    },
    {
      "name": "error_code",
      "label": "エラーコード",
      "fieldType": "string",
      "formInput": "none",
      "required": false
    },
    {
      "name": "error_message",
      "label": "エラーメッセージ",
      "fieldType": "string",
      "formInput": "none",
      "required": false
    },
    {
      "name": "completed_at",
      "label": "完了日時",
      "fieldType": "timestamp",
      "formInput": "none",
      "required": false
    },
    {
      "name": "expires_at",
      "label": "有効期限",
      "fieldType": "timestamp",
      "formInput": "none",
      "required": false
    }
  ],
  "searchFields": [
    "user_id",
    "idempotency_key",
    "status",
    "payment_session_id"
  ],
  "defaultOrderBy": [
    ["createdAt", "DESC"]
  ],
  "tableFields": [
    "user_id",
    "wallet_type",
    "amount",
    "payment_amount",
    "status",
    "payment_provider",
    "createdAt"
  ],
  "useDetailModal": false,
  "addToAdminDataMenu": false,
  "generateFiles": {
    "entities": true,
    "components": false,
    "hooks": true,
    "clientServices": true,
    "serverServices": true,
    "adminRoutes": false,
    "registry": true,
    "fieldConstants": true
  }
}
