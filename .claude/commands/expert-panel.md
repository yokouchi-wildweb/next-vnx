---
description: 実装方針・設計を複数の専門家（セキュリティ、パフォーマンス、コード品質、アーキテクチャ）が並列で深く分析
---

# 専門家パネル - Expert Panel

## Step 1: 専門家の選択

`AskUserQuestion` ツールを使用して、以下の複数選択式の質問を表示:

```
questions:
  - question: どの専門家に意見を聞きますか？
    header: 専門家
    multiSelect: true
    options:
      - label: セキュリティ
        description: 脆弱性、認証認可、データ保護を評価
      - label: パフォーマンス
        description: レスポンス、スケーラビリティ、リソース効率を評価
      - label: コード品質
        description: シンプルさ、可読性、適切な分割を評価
      - label: アーキテクチャ
        description: 一般的な設計原則 + プロジェクト固有ルールを評価
```

## Step 2: 分析対象の入力

選択後、以下のメッセージを表示してユーザーの入力を待つ:

```
分析したい実装方針・設計・コードなどを入力してください。
```

---

## Step 3: 専門家エージェントのバックグラウンド並列起動

選択された専門家のエージェントを **Task toolで `run_in_background: true` を指定して並列起動**。
必ず選択された全てを**同時に1つのメッセージで**呼び出す。

### エージェントマッピング

| 選択肢 | 起動するエージェント | アイコン |
|-------|-------------------|---------|
| セキュリティ | `expert-security` | 🔐 |
| パフォーマンス | `expert-performance` | ⚡ |
| コード品質 | `expert-code-quality` | 🔧 |
| **アーキテクチャ** | `expert-architecture` + `expert-project-structure` | 🏛️📐 |

**重要**: 「アーキテクチャ」が選択された場合は、2つのエージェントを起動する:
- `expert-architecture`: 一般的な設計原則（SOLID、クリーンアーキテクチャ等）
- `expert-project-structure`: プロジェクト固有ルール（8層、ドメイン分離、CLAUDE.md）

### 各エージェントへのプロンプト

```
あなたは[専門分野]の専門家です。

以下について、あなたの専門分野の観点から深く分析してください。

【分析対象】
（ユーザーが指定した内容）

【重要】
- 深い洞察を提供
- 具体的な根拠と推奨対策を含める
- リスクレベルを明示
- .claude/agents/experts/ の該当エージェント定義に従って出力
```

## Step 4: 進捗表示

```
🚀 専門家パネルを起動しました

📊 実行状況:
  （選択された専門家のみ表示）
  ※アーキテクチャ選択時は2名表示:
    🏛️ アーキテクチャ（一般）... 分析中
    📐 アーキテクチャ（プロジェクト）... 分析中

⏳ 全エージェントの完了を待機しています...
```

## Step 5: 結果の収集

**TaskOutput tool** で各エージェントの結果を収集（`block: true`）

## Step 6: 統合レポート作成

### 📊 エグゼクティブサマリー

| 観点 | 評価 | 主な所見 |
|-----|------|---------|
| （選択された専門家のみ） | 🔴/🟡/🟢 | 一文で要約 |

※アーキテクチャ選択時は2行表示:
- 🏛️ アーキテクチャ（一般）
- 📐 アーキテクチャ（プロジェクト）

**総合判定**: ✅ 進行推奨 / ⚠️ 条件付き推奨 / ❌ 再検討必要

---

### 各専門家の見解

（選択された専門家の詳細レポートを配置）

---

### 🎯 クロスカッティング分析

- **共通指摘**: ...
- **見解の相違**: ...
- **相互影響**: ...

---

### 📋 統合アクションプラン

| 優先度 | アクション | 関連観点 |
|-------|----------|---------|
| 1 | ... | ... |
| 2 | ... | ... |

---

### 💡 次のステップ

1. 最優先で対処すべき事項
2. 追加検討が必要な事項
3. 実装後に確認すべき事項
